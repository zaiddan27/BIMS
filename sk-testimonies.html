<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BIMS - Manage Testimonies</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/responsive.css" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#2f6e4e",
              secondary: "#3d8b64",
            },
            fontFamily: {
              sans: ["Inter", "system-ui", "sans-serif"],
            },
          },
        },
      };
    </script>
    <style>
      .icon-wrapper { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
      .icon-wrapper:hover { transform: translateY(-2px); }
      .nav-link svg { transition: all 0.3s ease; }
      .nav-link:hover svg { transform: scale(1.1); }
      .icon-badge { box-shadow: 0 2px 8px rgba(47, 110, 78, 0.15); }
      .notification-icon { position: relative; }
      .notification-icon:hover { transform: rotate(15deg) scale(1.1); transition: transform 0.3s ease; }
      .status-icon-pending { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
      .status-icon-approved { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
      .status-icon-rejected { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
      .icon-primary { filter: drop-shadow(0 2px 4px rgba(47, 110, 78, 0.1)); }
      .icon-glow { filter: drop-shadow(0 0 8px rgba(47, 110, 78, 0.3)); }

      /* Toast Notification Styles */
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        min-width: 300px;
        background: white;
        padding: 16px 20px;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 12px;
        transform: translateX(400px);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 9999;
      }

      .toast.show {
        transform: translateX(0);
      }

      .toast.success {
        border-left: 4px solid #10b981;
      }

      .toast.error {
        border-left: 4px solid #ef4444;
      }

      .toast.warning {
        border-left: 4px solid #f59e0b;
      }

      .toast.info {
        border-left: 4px solid #3b82f6;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div class="flex h-screen overflow-hidden">
      <!-- Sidebar Navigation -->
      <aside
        class="w-64 bg-white shadow-lg flex-shrink-0 h-screen flex flex-col"
      >
        <div class="p-6 flex-1 flex flex-col">
          <!-- Logo -->
          <div class="flex items-center space-x-4 mb-8">
            <div
              class="w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-lg icon-badge overflow-hidden"
            >
              <img src="asset/logo.svg" alt="BIMS Logo" class="w-full h-full object-contain p-1">
            </div>
            <div>
              <h1 class="text-xl font-black text-gray-800">BIMS</h1>
              <p class="text-sm text-gray-600 font-medium">SK Malanday</p>
            </div>
          </div>

          <!-- Navigation Menu -->
          <nav class="space-y-2">
            <a
              href="sk-dashboard.html"
              class="nav-link flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition group"
            >
              <div class="w-9 h-9 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-green-50 transition">
                <svg
                  class="w-5 h-5 group-hover:text-green-600 transition"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3"
                  ></path>
                </svg>
              </div>
              <span>Dashboard</span>
            </a>
            <a
              href="sk-files.html"
              class="nav-link flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition group"
            >
              <div class="w-9 h-9 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-blue-50 transition">
                <svg
                  class="w-5 h-5 group-hover:text-blue-600 transition"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                  ></path>
                </svg>
              </div>
              <span>Manage Files</span>
            </a>
            <a
              href="sk-projects.html"
              class="nav-link flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition group"
            >
              <div class="w-9 h-9 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-purple-50 transition">
                <svg
                  class="w-5 h-5 group-hover:text-purple-600 transition"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                  ></path>
                </svg>
              </div>
              <span>Project Monitoring</span>
            </a>
            <a
              href="sk-calendar.html"
              class="nav-link flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition group"
            >
              <div class="w-9 h-9 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-orange-50 transition">
                <svg
                  class="w-5 h-5 group-hover:text-orange-600 transition"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  ></path>
                </svg>
              </div>
              <span>Calendar</span>
            </a>
            <a
              href="sk-testimonies.html"
              class="nav-link flex items-center space-x-3 px-4 py-3 bg-[#2f6e4e]/10 text-[#2f6e4e] rounded-lg font-medium group"
            >
              <div class="w-9 h-9 bg-[#2f6e4e]/20 rounded-lg flex items-center justify-center group-hover:bg-[#2f6e4e]/30 transition">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2.5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
                  ></path>
                </svg>
              </div>
              <span>Testimonies</span>
            </a>
            <a
              href="sk-archive.html"
              class="nav-link flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition group"
            >
              <div class="w-9 h-9 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-gray-200 transition">
                <svg
                  class="w-5 h-5 group-hover:text-gray-700 transition"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"
                  ></path>
                </svg>
              </div>
              <span>Archives</span>
            </a>
          </nav>

          <div class="flex-1"></div>

          <!-- Logout -->
          <div class="mt-8 pt-8 border-t border-gray-200">
            <button
              class="nav-link flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition w-full group"
            >
              <div class="w-9 h-9 bg-red-50 rounded-lg flex items-center justify-center group-hover:bg-red-100 transition">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                  ></path>
                </svg>
              </div>
              <span class="font-medium">Logout</span>
            </button>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <div class="flex-1 overflow-auto">
        <!-- Top Bar -->
        <header class="bg-gradient-to-r from-[#2f6e4e]/10 to-white border-b border-gray-200">
          <div class="px-8 py-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-[#2f6e4e] font-semibold mb-1" id="currentDate">Sunday, December 14, 2025</p>
                <h1 class="text-2xl font-bold text-gray-800">Volunteer Testimonies</h1>
                <p class="text-sm text-gray-600 mt-1">Manage and feature testimonials from youth volunteers</p>
              </div>
              <div class="flex items-center space-x-4">
                <div class="relative">
                  <button onclick="toggleNotificationModal()" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition" title="Notifications">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                    </svg>
                    <span id="notificationBadge" class="hidden absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">5</span>
                  </button>
                </div>
                <button onclick="openProfileModal()" class="flex items-center space-x-3 hover:bg-gray-100 rounded-lg px-3 py-2 transition-colors">
                  <div class="text-right">
                    <p class="text-sm font-medium text-gray-700 group-hover:text-[#2f6e4e] transition">Andrea Pelias</p>
                    <p class="text-xs text-gray-500">SK Chairman</p>
                  </div>
                  <div class="w-10 h-10 bg-gradient-to-br from-[#2f6e4e] to-[#3d8b64] rounded-full flex items-center justify-center text-white font-semibold shadow-lg ring-2 ring-[#2f6e4e]/20 group-hover:ring-[#2f6e4e]/40 transition">
                    AP
                  </div>
                </button>
              </div>
            </div>
          </div>
        </header>

        <!-- Filter and Stats -->
        <div class="px-6 py-6">
          <div class="max-w-7xl mx-auto">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
              <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                <div class="flex items-center justify-between mb-2">
                  <p class="text-sm font-medium text-gray-600">Total Testimonies</p>
                  <svg class="w-8 h-8 text-[#2f6e4e]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                  </svg>
                </div>
                <p class="text-3xl font-bold text-gray-800" id="totalTestimonies">12</p>
              </div>

              <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                <div class="flex items-center justify-between mb-2">
                  <p class="text-sm font-medium text-gray-600">Featured</p>
                  <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                  </svg>
                </div>
                <p class="text-3xl font-bold text-gray-800" id="featuredCount">5</p>
              </div>

            </div>

            <!-- Filter Tabs -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
              <div class="flex items-center justify-between mb-6">
                <div class="flex space-x-2">
                  <button
                    onclick="filterTestimonies('all')"
                    id="filterAll"
                    class="px-4 py-2 bg-[#2f6e4e] text-white rounded-lg font-medium transition"
                  >
                    All (12)
                  </button>
                  <button
                    onclick="filterTestimonies('featured')"
                    id="filterFeatured"
                    class="px-4 py-2 bg-gray-100 text-gray-600 hover:bg-gray-200 rounded-lg font-medium transition"
                  >
                    Featured (5)
                  </button>
                </div>

                <div class="flex items-center space-x-3 cursor-pointer hover:bg-gray-50 rounded-xl px-3 py-2 transition-all duration-300 group" onclick="openProfileModal()">
                  <input
                    type="text"
                    id="searchInput"
                    placeholder="Search testimonies..."
                    class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d8b64] focus:border-transparent"
                    oninput="searchTestimonies()"
                  />
                </div>
              </div>

              <!-- Testimonies Grid -->
              <div id="testimoniesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Testimony cards will be inserted here by JavaScript -->
              </div>

              <!-- Empty State -->
              <div id="emptyState" class="hidden text-center py-12">
                <svg class="w-20 h-20 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                </svg>
                <p class="text-gray-500 font-medium">No testimonies found</p>
                <p class="text-sm text-gray-400 mt-1">Try adjusting your filters</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- View Testimony Modal -->
    <div
      id="viewModal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
    >
      <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="text-2xl font-bold text-gray-800">Testimony Details</h3>
            <button
              onclick="closeViewModal()"
              class="text-gray-400 hover:text-gray-600 transition"
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
        </div>

        <div class="p-6 space-y-4">
          <div class="flex items-start space-x-4">
            <div id="viewAvatar" class="w-16 h-16 bg-[#2f6e4e] rounded-full flex items-center justify-center text-white font-bold text-xl flex-shrink-0">
              JD
            </div>
            <div class="flex-1">
              <h4 id="viewVolunteerName" class="text-lg font-bold text-gray-800">Juan Dela Cruz</h4>
              <p id="viewProject" class="text-sm text-gray-600">Community Clean-Up Drive 2025</p>
              <p id="viewDate" class="text-xs text-gray-400 mt-1">Submitted: Nov 20, 2025</p>
            </div>
            <div id="viewStatusBadge"></div>
          </div>

          <div class="border-t border-gray-200 pt-4">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Testimony</label>
            <p id="viewTestimony" class="text-gray-700 leading-relaxed"></p>
          </div>

          <div class="border-t border-gray-200 pt-4">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Satisfaction Rating</label>
            <div class="flex items-center space-x-2">
              <div id="viewRating" class="flex space-x-1"></div>
              <span id="viewRatingText" class="text-sm text-gray-600"></span>
            </div>
          </div>
        </div>

        <div class="p-6 border-t border-gray-200 flex justify-between">
          <button
            onclick="closeViewModal()"
            class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition font-medium"
          >
            Close
          </button>
          <div class="flex space-x-3">
            <button
              id="deleteBtn"
              onclick="deleteTestimony()"
              class="px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition font-medium flex items-center space-x-2"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
              </svg>
              <span>Delete</span>
            </button>
            <button
              id="featureBtn"
              onclick="toggleFeature()"
              class="px-6 py-3 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition font-medium flex items-center space-x-2"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
              </svg>
              <span id="featureBtnText">Feature</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-[10000] flex items-center justify-center p-4">
      <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 transform transition-all">
        <div class="flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4">
          <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
          </svg>
        </div>
        <h3 id="confirmTitle" class="text-lg font-bold text-gray-900 text-center mb-2">Confirm Action</h3>
        <p id="confirmMessage" class="text-sm text-gray-600 text-center mb-6">Are you sure you want to proceed?</p>
        <div class="flex gap-3">
          <button id="confirmCancel" class="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition font-medium text-gray-700">Cancel</button>
          <button id="confirmOk" class="flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition font-medium">Delete</button>
        </div>
      </div>
    </div>

    <script>
      // Sample testimonies data
      let testimonies = [
        {
          id: 1,
          volunteerId: 1,
          volunteerName: "Juan Dela Cruz",
          volunteerInitials: "JD",
          project: "Community Clean-Up Drive 2025",
          projectId: 1,
          testimony: "This was an amazing experience! I learned so much about environmental conservation and met wonderful people. The SK team was very organized and supportive throughout the project. I'm proud to have contributed to making our community cleaner.",
          rating: 5,
          status: "approved",
          featured: true,
          dateSubmitted: "Nov 20, 2025"
        },
        {
          id: 2,
          volunteerId: 2,
          volunteerName: "Maria Santos",
          volunteerInitials: "MS",
          project: "Youth Sports Festival 2025",
          projectId: 2,
          testimony: "The sports festival was well-organized and fun! I enjoyed being part of the team and helping manage the events. Great experience for personal growth.",
          rating: 5,
          status: "approved",
          featured: true,
          dateSubmitted: "Nov 18, 2025"
        },
        {
          id: 3,
          volunteerId: 3,
          volunteerName: "Pedro Reyes",
          volunteerInitials: "PR",
          project: "Free Skills Training Workshop",
          projectId: 3,
          testimony: "I gained valuable skills in digital marketing and design. The instructors were knowledgeable and patient. Highly recommend this program!",
          rating: 4,
          status: "approved",
          featured: true,
          dateSubmitted: "Nov 22, 2025"
        },
        {
          id: 4,
          volunteerId: 4,
          volunteerName: "Ana Cruz",
          volunteerInitials: "AC",
          project: "Community Garden Project",
          projectId: 4,
          testimony: "Working on the community garden taught me about sustainable farming and teamwork. It was rewarding to see our efforts bloom!",
          rating: 5,
          status: "approved",
          featured: false,
          dateSubmitted: "Nov 15, 2025"
        },
        {
          id: 5,
          volunteerId: 5,
          volunteerName: "Carlo Mendoza",
          volunteerInitials: "CM",
          project: "Beach Cleanup Drive",
          projectId: 5,
          testimony: "Great initiative! We collected tons of trash and raised awareness about ocean pollution. The experience opened my eyes to environmental issues.",
          rating: 4,
          status: "approved",
          featured: true,
          dateSubmitted: "Nov 12, 2025"
        },
        {
          id: 6,
          volunteerId: 6,
          volunteerName: "Lisa Garcia",
          volunteerInitials: "LG",
          project: "Community Clean-Up Drive 2025",
          projectId: 1,
          testimony: "This project made me realize how important community service is. I'll definitely participate in more SK activities!",
          rating: 5,
          status: "approved",
          featured: true,
          dateSubmitted: "Nov 21, 2025"
        },
        {
          id: 7,
          volunteerId: 7,
          volunteerName: "Miguel Torres",
          volunteerInitials: "MT",
          project: "Youth Sports Festival 2025",
          projectId: 2,
          testimony: "Being a volunteer coordinator was challenging but fulfilling. I developed leadership skills and made lasting friendships.",
          rating: 4,
          status: "approved",
          featured: false,
          dateSubmitted: "Nov 19, 2025"
        },
        {
          id: 8,
          volunteerId: 8,
          volunteerName: "Sarah Lopez",
          volunteerInitials: "SL",
          project: "Free Skills Training Workshop",
          projectId: 3,
          testimony: "The workshop exceeded my expectations. I now have practical skills I can use for freelancing. Thank you SK Malanday!",
          rating: 5,
          status: "approved",
          featured: false,
          dateSubmitted: "Nov 23, 2025"
        },
        {
          id: 9,
          volunteerId: 9,
          volunteerName: "Rico Fernandez",
          volunteerInitials: "RF",
          project: "Community Garden Project",
          projectId: 4,
          testimony: "I loved getting my hands dirty and learning about urban gardening. This project brought our community closer together.",
          rating: 4,
          status: "approved",
          featured: false,
          dateSubmitted: "Nov 16, 2025"
        },
        {
          id: 10,
          volunteerId: 10,
          volunteerName: "Jenny Ramos",
          volunteerInitials: "JR",
          project: "Beach Cleanup Drive",
          projectId: 5,
          testimony: "Eye-opening experience! I had no idea how much plastic waste ends up in our oceans. Will definitely be more mindful now.",
          rating: 5,
          status: "pending",
          featured: false,
          dateSubmitted: "Dec 10, 2025"
        },
        {
          id: 11,
          volunteerId: 11,
          volunteerName: "Mark Villanueva",
          volunteerInitials: "MV",
          project: "Youth Sports Festival 2025",
          projectId: 2,
          testimony: "Great event! The SK did an excellent job organizing everything. I enjoyed helping out and meeting new people from different barangays.",
          rating: 4,
          status: "pending",
          featured: false,
          dateSubmitted: "Dec 11, 2025"
        },
        {
          id: 12,
          volunteerId: 12,
          volunteerName: "Diana Pascual",
          volunteerInitials: "DP",
          project: "Community Clean-Up Drive 2025",
          projectId: 1,
          testimony: "My first time volunteering and it was amazing! The team made me feel welcome. Looking forward to more opportunities like this.",
          rating: 5,
          status: "pending",
          featured: false,
          dateSubmitted: "Dec 12, 2025"
        }
      ];

      let currentFilter = 'all';
      let currentTestimonyId = null;

      // Initialize page
      function init() {
        updateStats();
        renderTestimonies();
      }

      // Update statistics
      function updateStats() {
        const total = testimonies.length;
        const featured = testimonies.filter(t => t.featured).length;
        const pending = testimonies.filter(t => t.status === 'pending').length;
        const approved = testimonies.filter(t => t.status === 'approved').length;

        document.getElementById('totalTestimonies').textContent = total;
        document.getElementById('featuredCount').textContent = featured;

        // Update filter button counts
        document.getElementById('filterAll').textContent = `All (${total})`;
        document.getElementById('filterFeatured').textContent = `Featured (${featured})`;
      }

      // Filter testimonies
      function filterTestimonies(filter) {
        currentFilter = filter;

        // Update button states
        document.querySelectorAll('[id^="filter"]').forEach(btn => {
          btn.classList.remove('bg-[#2f6e4e]', 'text-white');
          btn.classList.add('bg-gray-100', 'text-gray-600');
        });

        const activeBtn = document.getElementById(`filter${filter.charAt(0).toUpperCase() + filter.slice(1)}`);
        if (activeBtn) {
          activeBtn.classList.remove('bg-gray-100', 'text-gray-600');
          activeBtn.classList.add('bg-[#2f6e4e]', 'text-white');
        }

        renderTestimonies();
      }

      // Search testimonies
      function searchTestimonies() {
        renderTestimonies();
      }

      // Render testimonies grid
      function renderTestimonies() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();

        let filtered = testimonies.filter(t => {
          // Apply filter
          let matchesFilter = true;
          if (currentFilter === 'pending') matchesFilter = t.status === 'pending';
          if (currentFilter === 'approved') matchesFilter = t.status === 'approved';
          if (currentFilter === 'featured') matchesFilter = t.featured;

          // Apply search
          const matchesSearch = searchTerm === '' ||
            t.volunteerName.toLowerCase().includes(searchTerm) ||
            t.project.toLowerCase().includes(searchTerm) ||
            t.testimony.toLowerCase().includes(searchTerm);

          return matchesFilter && matchesSearch;
        });

        const grid = document.getElementById('testimoniesGrid');
        const emptyState = document.getElementById('emptyState');

        if (filtered.length === 0) {
          grid.classList.add('hidden');
          emptyState.classList.remove('hidden');
          return;
        }

        grid.classList.remove('hidden');
        emptyState.classList.add('hidden');

        grid.innerHTML = filtered.map(t => {
          const statusBadge = t.status === 'pending'
            ? '<span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full">Pending</span>'
            : '<span class="px-2 py-1 bg-[#2f6e4e]/20 text-[#2f6e4e] text-xs font-medium rounded-full">Approved</span>';

          const featuredBadge = t.featured
            ? '<span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full flex items-center space-x-1"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg><span>Featured</span></span>'
            : '';

          const stars = '★'.repeat(t.rating) + '☆'.repeat(5 - t.rating);

          return `
            <div class="bg-white border border-gray-200 rounded-xl p-5 hover:shadow-lg transition cursor-pointer" onclick="viewTestimony(${t.id})">
              <div class="flex items-start justify-between mb-3">
                <div class="flex items-start space-x-3">
                  <div class="w-12 h-12 bg-[#2f6e4e] rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">
                    ${t.volunteerInitials}
                  </div>
                  <div class="flex-1 min-w-0">
                    <h4 class="font-bold text-gray-800 truncate">${t.volunteerName}</h4>
                    <p class="text-xs text-gray-500 truncate">${t.project}</p>
                    <div class="flex items-center space-x-1 mt-1">
                      <span class="text-yellow-500 text-sm">${stars}</span>
                      <span class="text-xs text-gray-500">(${t.rating}/5)</span>
                    </div>
                  </div>
                </div>
              </div>

              <p class="text-sm text-gray-700 line-clamp-3 mb-3">${t.testimony}</p>

              <div class="flex items-center justify-between pt-3 border-t border-gray-200">
                <span class="text-xs text-gray-400">${t.dateSubmitted}</span>
                <div class="flex items-center space-x-2">
                  ${featuredBadge}
                  ${statusBadge}
                </div>
              </div>
            </div>
          `;
        }).join('');
      }

      // View testimony details
      function viewTestimony(id) {
        const testimony = testimonies.find(t => t.id === id);
        if (!testimony) return;

        currentTestimonyId = id;

        document.getElementById('viewAvatar').textContent = testimony.volunteerInitials;
        document.getElementById('viewVolunteerName').textContent = testimony.volunteerName;
        document.getElementById('viewProject').textContent = testimony.project;
        document.getElementById('viewDate').textContent = `Submitted: ${testimony.dateSubmitted}`;
        document.getElementById('viewTestimony').textContent = testimony.testimony;

        // Status badge
        const statusBadge = testimony.status === 'pending'
          ? '<span class="px-3 py-1 bg-yellow-100 text-yellow-700 text-sm font-medium rounded-full">Pending Review</span>'
          : '<span class="px-3 py-1 bg-[#2f6e4e]/20 text-[#2f6e4e] text-sm font-medium rounded-full">Approved</span>';
        document.getElementById('viewStatusBadge').innerHTML = statusBadge;

        // Rating stars
        const stars = '★'.repeat(testimony.rating) + '☆'.repeat(5 - testimony.rating);
        document.getElementById('viewRating').innerHTML = `<span class="text-yellow-500 text-2xl">${stars}</span>`;
        document.getElementById('viewRatingText').textContent = `${testimony.rating} out of 5`;

        // Update buttons
        const featureBtnText = document.getElementById('featureBtnText');
        featureBtnText.textContent = testimony.featured ? 'Unfeature' : 'Feature';

        document.getElementById('viewModal').classList.remove('hidden');
      }

      function closeViewModal() {
        document.getElementById('viewModal').classList.add('hidden');
        currentTestimonyId = null;
      }

      // Delete testimony
      function deleteTestimony() {
        const testimony = testimonies.find(t => t.id === currentTestimonyId);
        if (!testimony) return;

        showConfirm(
          'Delete Testimony',
          `Are you sure you want to permanently delete this testimony from ${testimony.volunteerName}? This action cannot be undone.`,
          () => {
            testimonies = testimonies.filter(t => t.id !== currentTestimonyId);
            updateStats();
            renderTestimonies();
            closeViewModal();
            showToast('Testimony has been permanently deleted.', 'success');
          },
          'Delete',
          'red'
        );
      }

      // Toggle featured status
      function toggleFeature() {
        const testimony = testimonies.find(t => t.id === currentTestimonyId);
        if (!testimony) return;

        testimony.featured = !testimony.featured;
        updateStats();
        renderTestimonies();

        const action = testimony.featured ? 'featured' : 'unfeatured';
        showToast(`Testimony has been ${action}!`);

        // Update button text
        document.getElementById('featureBtnText').textContent = testimony.featured ? 'Unfeature' : 'Feature';
      }

      // Toast Notification System
      function showToast(message, type = 'success') {
        const existingToast = document.querySelector('.toast');
        if (existingToast) {
          existingToast.remove();
        }

        const toast = document.createElement('div');
        toast.className = `toast ${type}`;

        let icon = '';
        if (type === 'success') {
          icon = '<svg class="w-6 h-6 text-green-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>';
        } else if (type === 'error') {
          icon = '<svg class="w-6 h-6 text-red-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>';
        } else if (type === 'warning') {
          icon = '<svg class="w-6 h-6 text-yellow-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>';
        } else {
          icon = '<svg class="w-6 h-6 text-blue-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>';
        }

        toast.innerHTML = `
          ${icon}
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-800">${message}</p>
          </div>
          <button onclick="this.parentElement.remove()" class="text-gray-400 hover:text-gray-600 transition">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        `;

        document.body.appendChild(toast);
        setTimeout(() => toast.classList.add('show'), 10);
        setTimeout(() => {
          toast.classList.remove('show');
          setTimeout(() => toast.remove(), 300);
        }, 4000);
      }

      // Confirmation Modal
      function showConfirm(title, message, onConfirm, confirmButtonText = 'Delete', confirmButtonColor = 'red') {
        const modal = document.getElementById('confirmModal');
        const titleEl = document.getElementById('confirmTitle');
        const messageEl = document.getElementById('confirmMessage');
        const confirmBtn = document.getElementById('confirmOk');
        const cancelBtn = document.getElementById('confirmCancel');

        titleEl.textContent = title;
        messageEl.textContent = message;
        confirmBtn.textContent = confirmButtonText;

        // Update button colors
        confirmBtn.className = `flex-1 px-4 py-2.5 ${confirmButtonColor === 'red' ? 'bg-red-600 hover:bg-red-700' : 'bg-[#2f6e4e] hover:bg-[#3d8b64]'} text-white rounded-lg transition font-medium`;

        modal.classList.remove('hidden');

        const handleConfirm = () => {
          modal.classList.add('hidden');
          onConfirm();
          cleanup();
        };

        const handleCancel = () => {
          modal.classList.add('hidden');
          cleanup();
        };

        const cleanup = () => {
          confirmBtn.removeEventListener('click', handleConfirm);
          cancelBtn.removeEventListener('click', handleCancel);
        };

        confirmBtn.addEventListener('click', handleConfirm);
        cancelBtn.addEventListener('click', handleCancel);

        // Close on backdrop click
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            handleCancel();
          }
        });
      }

      // Notification System
      let notifications = [
        {
          id: 1,
          type: "project_approved",
          title: "Project Approved: Community Clean-Up Drive 2025",
          message: "Your project has been approved by the Barangay Captain and is now Ongoing",
          time: "2 hours ago",
          read: false,
          projectId: 1,
          status: "approved",
        },
        {
          id: 2,
          type: "project_rejected",
          title: "Project Rejected: International Youth Exchange Program",
          message: "Your project has been rejected. Click to view captain's feedback and edit your proposal",
          time: "1 day ago",
          read: false,
          projectId: 4,
          status: "rejected",
        },
        {
          id: 3,
          type: "project_revision",
          title: "Revision Requested: Scholarship Program Deadline",
          message: "The Barangay Captain requested revisions. Click to view feedback and edit your project",
          time: "3 hours ago",
          read: false,
          projectId: 3,
          status: "revision",
        },
        {
          id: 4,
          type: "new_inquiry",
          title: "New Inquiry: Community Clean-Up Drive 2025",
          message: "Juan Dela Cruz posted a new inquiry on your project",
          time: "5 minutes ago",
          read: false,
          projectId: 1,
        },
        {
          id: 5,
          type: "inquiry_reply",
          title: "Inquiry Reply: Youth Sports Festival",
          message: "Maria Santos replied to an inquiry thread",
          time: "1 hour ago",
          read: false,
          projectId: 2,
        },
        {
          id: 6,
          type: "new_announcement",
          title: "New Announcement Posted",
          message: "Kyleen Nicdao posted a new announcement",
          time: "2 hours ago",
          read: false,
          referenceId: 1,
        },
        {
          id: 7,
          type: "new_project",
          title: "New Project: Beach Clean-Up Initiative",
          message: "Andrea Pelias created a new project",
          time: "3 hours ago",
          read: false,
          referenceId: 3,
        },
        {
          id: 8,
          type: "project_application",
          title: "New Application: Community Clean-Up Drive 2025",
          message: "Juan Dela Cruz applied to your project",
          time: "30 minutes ago",
          read: false,
          projectId: 1,
          applicantId: 1,
        },
      ];

      function toggleNotificationModal() {
        const modal = document.getElementById("notificationModal");
        modal.classList.toggle("hidden");
        if (!modal.classList.contains("hidden")) {
          renderNotifications();
        }
      }

      function closeNotificationModal() {
        document.getElementById("notificationModal").classList.add("hidden");
      }

      function updateNotificationCount() {
        const unreadCount = notifications.filter((n) => !n.read).length;
        const badge = document.getElementById("notificationBadge");

        if (unreadCount > 0) {
          badge.textContent = unreadCount > 9 ? "9+" : unreadCount;
          badge.classList.remove("hidden");
        } else {
          badge.classList.add("hidden");
        }
      }

      function getNotificationIcon(type) {
        switch (type) {
          case "new_inquiry":
            return `<svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>`;
          case "inquiry_reply":
            return `<svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
            </svg>`;
          case "new_announcement":
            return `<svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"></path>
            </svg>`;
          case "new_project":
            return `<svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
            </svg>`;
          case "project_application":
            return `<svg class="w-6 h-6 text-[#2f6e4e]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>`;
          default:
            return "";
        }
      }

      function getNotificationBgColor(type) {
        switch (type) {
          case "new_inquiry":
            return "bg-yellow-50";
          case "inquiry_reply":
            return "bg-yellow-50";
          case "new_announcement":
            return "bg-blue-50";
          case "new_project":
            return "bg-blue-50";
          case "project_application":
            return "bg-[#2f6e4e]/10";
          default:
            return "bg-gray-50";
        }
      }

      function renderNotifications() {
        const notificationList = document.getElementById("notificationList");

        if (notifications.length === 0) {
          notificationList.innerHTML = `
            <div class="p-8 text-center text-gray-500">
              <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
              </svg>
              <p class="font-medium">No notifications</p>
              <p class="text-sm mt-1">You're all caught up!</p>
            </div>
          `;
          return;
        }

        notificationList.innerHTML = notifications
          .map(
            (notif) => `
          <div
            onclick="handleNotificationClick(${notif.id})"
            class="p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition ${
              !notif.read ? getNotificationBgColor(notif.type) : ""
            }"
          >
            <div class="flex items-start space-x-3">
              <div class="flex-shrink-0">
                ${getNotificationIcon(notif.type)}
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex items-start justify-between">
                  <p class="text-sm font-semibold text-gray-800 truncate ${
                    !notif.read ? "font-bold" : ""
                  }">
                    ${notif.title}
                  </p>
                  ${
                    !notif.read
                      ? '<span class="w-2 h-2 bg-[#2f6e4e] rounded-full flex-shrink-0 ml-2 mt-1"></span>'
                      : ""
                  }
                </div>
                <p class="text-xs text-gray-600 mt-1">${notif.message}</p>
                <p class="text-xs text-gray-400 mt-2">${notif.time}</p>
              </div>
            </div>
          </div>
        `
          )
          .join("");
      }

      function handleNotificationClick(notifId) {
        const notif = notifications.find((n) => n.id === notifId);
        if (!notif) return;

        notif.read = true;
        updateNotificationCount();
        closeNotificationModal();

        // Route to appropriate page based on notification type
        if (notif.type === "new_inquiry" || notif.type === "inquiry_reply") {
          window.location.href = `sk-projects.html?projectId=${notif.projectId}&tab=inquiries`;
        } else if (notif.type === "new_announcement") {
          window.location.href = `sk-dashboard.html`;
        } else if (notif.type === "new_project") {
          window.location.href = `sk-projects.html?projectId=${notif.referenceId}`;
        } else if (notif.type === "project_application") {
          window.location.href = `sk-projects.html?projectId=${notif.projectId}&tab=applications&applicantId=${notif.applicantId}`;
        }
      }

      function markAllAsRead() {
        notifications.forEach((n) => (n.read = true));
        updateNotificationCount();
        renderNotifications();
      }

      // Close notification modal when clicking outside
      document.addEventListener("click", function (event) {
        const modal = document.getElementById("notificationModal");
        const notificationButton = event.target.closest(
          'button[onclick="toggleNotificationModal()"]'
        );

        if (
          !modal.contains(event.target) &&
          !notificationButton &&
          !modal.classList.contains("hidden")
        ) {
          closeNotificationModal();
        }
      });

      // Initialize notification count on page load
      updateNotificationCount();

      // Initialize on page load
      document.addEventListener('DOMContentLoaded', init);

      // Update current date
      function updateCurrentDate() {
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const currentDate = new Date().toLocaleDateString('en-US', options);
        const dateElement = document.getElementById('currentDate');
        if (dateElement) {
          dateElement.textContent = currentDate;
        }
      }
      updateCurrentDate();

      // User profile data (in production, this would be fetched from server)
      let userProfile = {
        firstName: "Andrea",
        middleName: "",
        lastName: "Pelias",
        email: "andrea.pelias@malanday.gov.ph",
        position: "SK Chairman",
        address: "",
        contact: "",
        gender: "",
        birthday: ""
      };

      // Profile Modal Functions
      function openProfileModal() {
        // Load profile data into form
        document.getElementById('profileFirstName').value = userProfile.firstName;
        document.getElementById('profileMiddleName').value = userProfile.middleName;
        document.getElementById('profileLastName').value = userProfile.lastName;
        document.getElementById('profileEmail').value = userProfile.email;
        document.getElementById('profilePosition').value = userProfile.position;
        document.getElementById('profileAddress').value = userProfile.address;
        document.getElementById('profileContact').value = userProfile.contact;
        document.getElementById('profileGender').value = userProfile.gender;
        document.getElementById('profileBirthday').value = userProfile.birthday;

        // Load profile picture preview
        const previewDiv = document.getElementById('profilePicturePreview');
        if (userProfile.profilePicture) {
          previewDiv.innerHTML = `<img src="${userProfile.profilePicture}" alt="Profile Picture" class="w-full h-full object-cover rounded-full" />`;
        } else {
          const firstInitial = userProfile.firstName.charAt(0).toUpperCase();
          const lastInitial = userProfile.lastName.charAt(0).toUpperCase();
          previewDiv.innerHTML = `<span id="profileInitials" class="text-white font-bold text-2xl">${firstInitial}${lastInitial}</span>`;
        }

        document.getElementById('profileModal').classList.remove('hidden');
      }

      function closeProfileModal() {
        document.getElementById('profileModal').classList.add('hidden');
      }

      function handleProfilePictureChange(event) {
        const file = event.target.files[0];
        if (!file) return;

        // Validate file type
        if (!file.type.startsWith('image/')) {
          showToast('Please upload an image file', 'error');
          return;
        }

        // Validate file size (max 5MB)
        if (file.size > 5 * 1024 * 1024) {
          showToast('Image size should be less than 5MB', 'error');
          return;
        }

        const reader = new FileReader();
        reader.onload = function(e) {
          const imageData = e.target.result;

          // Store in profile
          userProfile.profilePicture = imageData;

          // Update modal preview
          const previewDiv = document.getElementById('profilePicturePreview');
          previewDiv.innerHTML = `<img src="${imageData}" alt="Profile Picture" class="w-full h-full object-cover rounded-full" />`;

          // Update header avatar
          updateHeaderAvatar();

          showToast('Profile picture uploaded successfully!');
        };
        reader.readAsDataURL(file);
      }

      function updateHeaderAvatar() {
        const headerAvatar = document.querySelector('header .w-10.h-10.bg-[#2f6e4e]');
        if (!headerAvatar) return;

        if (userProfile.profilePicture) {
          headerAvatar.innerHTML = `<img src="${userProfile.profilePicture}" alt="Profile" class="w-full h-full object-cover rounded-full" />`;
        } else {
          const firstInitial = userProfile.firstName.charAt(0).toUpperCase();
          const lastInitial = userProfile.lastName.charAt(0).toUpperCase();
          headerAvatar.innerHTML = `<span class="text-white font-bold">${firstInitial}${lastInitial}</span>`;
        }
      }

      function saveProfile() {
        // Get form values
        userProfile.firstName = document.getElementById('profileFirstName').value;
        userProfile.middleName = document.getElementById('profileMiddleName').value;
        userProfile.lastName = document.getElementById('profileLastName').value;
        userProfile.address = document.getElementById('profileAddress').value;
        userProfile.contact = document.getElementById('profileContact').value;
        userProfile.gender = document.getElementById('profileGender').value;
        userProfile.birthday = document.getElementById('profileBirthday').value;

        // Validation
        if (!userProfile.firstName || !userProfile.lastName) {
          showToast('First name and last name are required', 'warning');
          return;
        }

        // In production, this would save to the server
        console.log('Profile saved:', userProfile);

        // Update header display
        const middleInitial = userProfile.middleName ? ` ${userProfile.middleName.charAt(0)}.` : '';
        const fullName = `${userProfile.firstName}${middleInitial} ${userProfile.lastName}`;
        document.querySelector('header .text-sm.font-medium').textContent = fullName;

        // Update header avatar
        updateHeaderAvatar();

        showToast('Profile updated successfully!');
        closeProfileModal();
      }
    </script>

    <!-- Profile Modal -->
    <div id="profileModal" class="hidden fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50">
      <div class="flex items-center justify-center min-h-screen px-4">
        <div class="relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full">
          <!-- Header -->
          <div class="bg-gradient-to-r from-[#3d8b64] to-[#3d8b64] text-white p-6 rounded-t-2xl">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-white font-bold text-2xl">
                  AP
                </div>
                <div>
                  <h2 class="text-2xl font-bold">My Profile</h2>
                  <p class="text-[#2f6e4e]/20 text-sm">Manage your account information</p>
                </div>
              </div>
              <button onclick="closeProfileModal()" class="text-white hover:bg-white/20 rounded-lg p-2 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
          </div>

          <!-- Body -->
          <div class="p-6 space-y-6">
            <!-- Account Info Section -->
            <div>
              <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-[#2f6e4e]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
                Account Information
              </h3>
              <div class="grid grid-cols-3 gap-4">
                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2">First Name</label>
                  <input type="text" id="profileFirstName" value="Andrea"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d8b64] focus:border-transparent" />
                </div>
                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2">Middle Name</label>
                  <input type="text" id="profileMiddleName" placeholder="Optional"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d8b64] focus:border-transparent" />
                </div>
                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2">Last Name</label>
                  <input type="text" id="profileLastName" value="Pelias"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d8b64] focus:border-transparent" />
                </div>
              </div>

              <div class="mt-4">
                <label class="block text-sm font-semibold text-gray-700 mb-2">Email Address</label>
                <input type="email" id="profileEmail" value="andrea.pelias@malanday.gov.ph"
                       class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed"
                       readonly />
                <p class="text-xs text-gray-500 mt-1">Email cannot be changed. Contact admin if needed.</p>
              </div>

              <div class="mt-4">
                <label class="block text-sm font-semibold text-gray-700 mb-2">Position</label>
                <input type="text" id="profilePosition" value="SK Chairman"
                       class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed"
                       readonly />
              </div>
            </div>

            <!-- Personal Info Section -->
            <div class="pt-6 border-t border-gray-200">
              <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-[#2f6e4e]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                </svg>
                Personal Information
              </h3>

              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2">Complete Address</label>
                  <textarea id="profileAddress" rows="3" placeholder="Enter your complete address"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d8b64] focus:border-transparent"></textarea>
                </div>

                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2">Contact Number</label>
                  <input type="tel" id="profileContact" placeholder="e.g., 09171234567"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d8b64] focus:border-transparent" />
                </div>

                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2">Gender</label>
                  <select id="profileGender" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d8b64] focus:border-transparent">
                    <option value="">Select gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="non-binary">Non-binary / Gender Neutral</option>
                    <option value="prefer-not-to-say">Prefer not to say</option>
                  </select>
                </div>

                <div>
                  <label class="block text-sm font-semibold text-gray-700 mb-2">Birthday</label>
                  <input type="date" id="profileBirthday"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d8b64] focus:border-transparent" />
                </div>
              </div>
            </div>
          </div>

          <!-- Footer -->
          <div class="sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-2xl flex justify-end gap-3 border-t">
            <button onclick="closeProfileModal()"
                    class="px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-medium transition">
              Cancel
            </button>
            <button onclick="saveProfile()"
                    class="px-6 py-3 bg-[#2f6e4e] hover:bg-[#2f6e4e] text-white rounded-lg font-medium transition flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              Save Changes
            </button>
          </div>
        </div>
      </div>
    </div>
      <script src="js/mobile-nav.js"></script>
  </body>
</html>
